# Goal
The objective is to extract all semantically meaningful entities and relationships from the input document for information retrieval.
**COMPLETENESS** is the top priority.

# Steps
## 1. Document Name and Page Extraction
   - Extract EXACT document name from pattern: "**아래는 [DOCUMENT_NAME] 파일의 X페이지 내용입니다.**"
   - **MANDATORY**: Remove any prefix numbers (like "2-2-2") from document name for entity naming
   - **PAGE TRACKING**: Extract and store the EXACT page number mentioned in each section header
   - **VERIFICATION**: Cross-check that page numbers in entity descriptions match the actual page mentioned in section headers

## 2. Structural Entity Rules
   **CRITICAL RULE**: Create any CHAPTER/SECTION/ARTICLE entity ONLY when exact text "제 X 장", "제 X 절", "제 X 조"
   - Markdown levels (`##/###/####`) remain for hierarchy recording only, never for type assignment  
   - **FORBIDDEN**: Never infer or create these entities from markdown headings alone
   - **ABSOLUTE PROHIBITION**: If "제 X 장", "제 X 절", "제 X 조" does not appear in the text, DO NOT create that entity type
   - 숫자나 “장/절/조”가 이름 중간에 있거나 markdown 헤딩만으로는 생성 금지  
   - 기타 모든 일반 명사 엔터티는 위 패턴에 해당하지 않으므로 CHAPTER/SECTION/ARTICLE 이 아닌 다른 타입으로 처리

## 3. Markdown Hierarchy Recognition
   **FOR ALL DOCUMENTS**: Recognize heading levels to build hierarchy, but do **not** infer structural entities from them.
   
   ### 3.1 Hierarchy Levels
   - `#` (level 1): Main heading
   - `##` (level 2): Major sections
   - `###` (level 3): Subsections  
   - `####` (level 4): Sub-subsections
   
   ### 3.2 Parent-Child Relationships
   **MANDATORY**: Every entity must trace its complete hierarchical path:
   - Content under `####` belongs to nearest `###`, `##`, and `#` above
   - Content under `###` belongs to nearest `##` and `#` above
   - Content under `##` belongs to nearest `#` above
   
   ### 3.3 Hierarchy Recording
   **In entity_description, record EXACT hierarchy using ACTUAL heading text**:
   - e.g.: “이 내용은 [#heading], [##heading], [###heading]에 속함”

## 4. Entity Identification
   ### 4.1 Entity Naming Rules
   - **STRUCTURAL ENTITIES**: "[DOCUMENT_NAME] 제 X 장/절/조" and end with “제 X 장”, “제 X 절”, or “제 X 조”.(when "제 X 장/절/조" exists)
   - **ALL OTHER ENTITIES**: Unique, capitalized name of the entity
   
   ### 4.2 Entity Types
   Every entity MUST be assigned exactly one type from `{entity_types}`:
   - PROJECT: Explicit project/system names
   - TEAM: Multi-person collaborative units
   - TECHNOLOGY: Technical tools, frameworks, hardware, software
   - ORGANIZATION: Companies, institutions, departments
   - PERSON: Individual names
   - CHAPTER/SECTION/ARTICLE: Only when the name ends exactly with the “제 X 장/절/조” patterns defined in **2. Structural Entity Rules**
   - Others: GEO, EVENT, DATE, ROOM, PHONE, CONCEPT

   ### 4.3 Entity Description Requirements
      **MANDATORY Korean-only descriptions with EXACT information**:
      1. **Content Summary**: Based on actual text content
      2. **Page Information**: Use EXACT page number from document header  
      3. **Hierarchy**: Use ACTUAL heading text, not inferred structure
      4. **Document Reference**: Use exact document name
            
   - **Output Format**: ("entity"{tuple_delimiter}<entity_name>{tuple_delimiter}<entity_type>{tuple_delimiter}<entity_description>)
 
## 5. Relationship Identification
   ### Description Rules
   - **KOREAN ONLY**: All relationship descriptions in Korean

   - For each relationship:
      - source_entity: name of the source entity, as identified in step 4
      - target_entity: name of the target entity, as identified in step 4
      - relationship_description: specific explanation of the relationship
      - relationship_strength: a numeric score(1-10) indicating strength of the relationship between the source entity and target entity
   - **Output Format**: ("relationship"{tuple_delimiter}<source_entity>{tuple_delimiter}<target_entity>{tuple_delimiter}<relationship_description>{tuple_delimiter}<relationship_strength>)

## 6. Output Generation & Completion
   - Return output in **Korean** as a single list of all the entities and relationships. 
   - Use **{record_delimiter}** as the list delimiter.
   - Output {completion_delimiter} when complete

######################
-Examples-
######################
Example 1:
Entity_types: CHAPTER,SECTION,ARTICLE,ORGANIZATION
Text:
** 아래는 1-1 가람학원 정관 파일의 1페이지 내용입니다. **
제 1 장 총칙
제 1 절 목적
제 1 조 (목적) 이 법은 교육진흥을 목적으로 한다.
제 2 조 (정의) 교육기관이라 함은 다음을 말한다.
제 2 절 원칙  
제 3 조 (기본원칙) 교육은 평등해야 한다.

** 아래는 1-1 가람학교 대학원 학칙 파일의 2페이지 내용입니다. **
## 제 1 장 총칙
#### 제 1 조 (목적) 사회 발전에 기여함을 목적으로 한다.

######################
Output:
("entity"{tuple_delimiter}가람학원 정관 제 1 장{tuple_delimiter}CHAPTER{tuple_delimiter}가람학원 정관의 제1장 총칙으로, 목적과 원칙을 규정한다. 이 장에는 목적을 다루는 제1절과 원칙을 다루는 제2절이 포함되어 있다. 가람학원 정관 파일의 1페이지에 위치함.)
{record_delimiter}
("entity"{tuple_delimiter}가람학원 정관 제 1 절{tuple_delimiter}SECTION{tuple_delimiter}가람학원 정관 제1절로 목적을 규정하는 절이다. 제1장에 속함. 가람학원 정관 파일의 1페이지에 위치함.)
{record_delimiter}
("entity"{tuple_delimiter}가람학원 정관 제 2 절{tuple_delimiter}SECTION{tuple_delimiter}가람학원 정관 제2절로 원칙을 규정하는 절이다. 제1장에 속함. 가람학원 정관 파일의 1페이지에 위치함.)
{record_delimiter}
("entity"{tuple_delimiter}가람학원 정관 제 1 조{tuple_delimiter}ARTICLE{tuple_delimiter}가람학원 정관 제1조로 이 법은 교육진흥을 목적으로 한다고 명시하는 목적 조항이다. 가람학원 정관의 제1장, 제1절에 속한다. 가람학원 정관 파일의 1페이지에 위치함.)
{record_delimiter}
("entity"{tuple_delimiter}가람학원 정관 제 2 조{tuple_delimiter}ARTICLE{tuple_delimiter}가람학원 정관 제2조로 교육기관이라 함은 다음을 말한다라는 정의를 규정하는 조항이다. 가람학원 정관의 제1장, 제1절에 속한다. 가람학원 정관 파일의 1페이지에 위치함.)
{record_delimiter}
("entity"{tuple_delimiter}가람학원 정관 제 3 조{tuple_delimiter}ARTICLE{tuple_delimiter}가람학원 정관 제3조로 교육은 평등해야 한다는 기본원칙을 명시하는 조항이다. 제1장, 제2절에 속한다. 가람학원 정관 파일의 1페이지에 위치함.)
{record_delimiter}
("entity"{tuple_delimiter}가람학원{tuple_delimiter}ORGANIZATION{tuple_delimiter}가람학원은 이 정관 문서의 주체가 되는 교육기관으로, 교육진흥을 목적으로 설립되었으며 교육평등 원칙을 바탕으로 운영되는 학원이다. 본 정관의 모든 규정이 적용되는 주요 기관이다.)
{record_delimiter}
("entity"{tuple_delimiter}가람학교 대학원 제 1 장{tuple_delimiter}CHAPTER{tuple_delimiter}가람학교 대학원 제1장 총칙으로, 목적을 규정한다. 이 장에는 목적을 다루는 제1절이 포함되어 있다. 가람학원 정관 파일의 2페이지에 위치함.)
{record_delimiter}
("entity"{tuple_delimiter}가람학교 대학원 제 1 조{tuple_delimiter}ARTICLE{tuple_delimiter}가람학교 대학원 제1조로 사회 발전에 기여함을 목적으로 한다고 명시하는 목적 조항이다. 가람학교 대학원의 제1장에 속한다. 가람학원 정관 파일의 2페이지에 위치함.)
{record_delimiter}
("relationship"{tuple_delimiter}가람학원 정관 제 1 절{tuple_delimiter}가람학원 정관 제 1 장 {tuple_delimiter}가람학원 정관 제 1 절은 제 1 장 총칙의 하위 구조로 포함되어 목적 관련 조항들을 담고 있다.{tuple_delimiter}9)
{record_delimiter}
("relationship"{tuple_delimiter}가람학원 정관 제 2 절{tuple_delimiter}가람학원 정관 제 1 장 {tuple_delimiter}가람학원 정관 제 2 절은 제 1 장 총칙의 하위 구조로 포함되어 원칙 관련 조항들을 담고 있다.{tuple_delimiter}9)
{record_delimiter}
("relationship"{tuple_delimiter}가람학원 정관 제 1 조{tuple_delimiter}가람학원 정관 제 1 절{tuple_delimiter}가람학원 정관 1 조는 제 1 절의 하위 조항으로 포함되어 교육진흥 목적을 규정한다.{tuple_delimiter}9)
{record_delimiter}
("relationship"{tuple_delimiter}가람학원 정관 제 2 조 정의{tuple_delimiter}가람학원 정관 제 1 절 {tuple_delimiter}가람학원 정관 제 2 조 정의는 제 1 절 목적의 하위 구조로 포함되는 관계{tuple_delimiter}9)
{record_delimiter}
("relationship"{tuple_delimiter}가람학원 정관 제 3 조{tuple_delimiter}가람학원 정관 제 2 절 {tuple_delimiter}가람학원 정관 제 3 조는 제 2 절의 하위 조항으로 포함되어 교육평등 기본원칙을 규정한다{tuple_delimiter}9)
{record_delimiter}
("relationship"{tuple_delimiter}가람학원{tuple_delimiter}가람학원 정관 제 1 조 목적{tuple_delimiter}가람학원은 정관 제 1조에서 교육진흥을 목적으로 한다고 명시된 주체 교육기관이다.{tuple_delimiter}8)
{record_delimiter}
("relationship"{tuple_delimiter}가람학교 대학원 제 1 조{tuple_delimiter}가람학교 대학원 제 1 장 {tuple_delimiter}가람학원 정관 제 1 조는 제 1 장 총칙의 하위 구조로 포함되어 목적 관련 조항을 담고 있다.{tuple_delimiter}10)
{record_delimiter}
{completion_delimiter}
######################
Example 2:
Entity_types: ORGANIZATION,PERSON,DATE,EVENT,COURSE
Text:
#제목: <중요> (김남윤 교수): 웹 프레임워크 2 수강신청 변경 공지
##카테고리: 공지사항
##작성자: 컴퓨터공학과
##내용:  
- 변경 날짜: 2월 28일 (금)

- 웹 공학 트랙
| Course Name | Year | Type | Class | Capacity | Supervising Professor | Instructor | Application |  
|------------|------|------|------|----------|--------------------|------------|-------------|  
| 웹 프레임워크 2 | 4 | Mixed | 7 | 40->80 | 김남윤 | 김남윤 | 웹 공학 트랙 학생만 |  
| 웹 프레임워크 2 | 4 | Day | A | 40->60 |  | 윤남김 | 웹 공학 트랙 학생만 |

-모바일 트랙
| Course Name | Year | Type | Class | Capacity | Supervising Professor | Instructor | Application |  
|------------|------|------|------|----------|--------------------|------------|-------------|  
| 운영체제 | 4 | Mixed | 7 | 40->80 | 황기태 | 황기태 | 모바일 트랙 학생만 |  
######################
Output:
("entity"{tuple_delimiter}컴퓨터공학과{tuple_delimiter}ORGANIZATION{tuple_delimiter}웹 프레임워크 2 강의 수강신청 변경 공지를 작성한 컴퓨터공학과)
("entity"{tuple_delimiter}김남윤{tuple_delimiter}PERSON{tuple_delimiter}웹 프레임워크 2 수강신청 변경 공지사항을 올린 교수이고, 웹 프레임워크 2 강의의 지도교수 겸 혼합반 강사를 담당하는 교수)
{record_delimiter}
("entity"{tuple_delimiter}윤남김{tuple_delimiter}PERSON{tuple_delimiter}웹 프레임워크 2 강의 주간 A반을 담당하는 강사)
{record_delimiter}
("entity"{tuple_delimiter}황기태{tuple_delimiter}PERSON{tuple_delimiter}운영체제 강의의 지도교수 겸 혼합반 강사를 담당하는 교수)
{record_delimiter}
("entity"{tuple_delimiter}2월 28일{tuple_delimiter}DATE{tuple_delimiter}웹 프레임워크 2 강의 등록 변경이 시행되는 날짜로 금요일임)
{record_delimiter}
("entity"{tuple_delimiter}웹 프레임워크 2{tuple_delimiter}COURSE{tuple_delimiter}웹 공학 트랙 수강생만 신청할 수 있는 4학년 강좌로 혼합반과 주간 A반으로 운영)
{record_delimiter}
("entity"{tuple_delimiter}운영체제{tuple_delimiter}COURSE{tuple_delimiter}모바일 트랙 수강생만 신청할 수 있는 4학년 강좌로 혼합반으로 운영)
{record_delimiter}
("entity"{tuple_delimiter}웹 공학 트랙{tuple_delimiter}ORGANIZATION{tuple_delimiter}웹 프레임워크 2 강의를 수강할 수 있는 유일한 트랙)
{record_delimiter}
("entity"{tuple_delimiter}모바일 트랙{tuple_delimiter}ORGANIZATION{tuple_delimiter}운영체제 강의를 수강할 수 있는 트랙)
{record_delimiter}
("entity"{tuple_delimiter}수강신청 변경 공지{tuple_delimiter}EVENT{tuple_delimiter}웹 프레임워크 2 강의의 정원 변경 및 수강신청 조건 변경에 관한 공지사항)
{record_delimiter}
("relationship"{tuple_delimiter}컴퓨터공학과{tuple_delimiter}수강신청 변경 공지{tuple_delimiter}컴퓨터공학과에서 수강 신청 변경 관련 공지를 함{tuple_delimiter}10)
{record_delimiter}
("relationship"{tuple_delimiter}김남윤{tuple_delimiter}웹 프레임워크 2{tuple_delimiter}김남윤은 웹 프레임워크 2의 지도교수이자 혼합반 강사임{tuple_delimiter}9)
{record_delimiter}
("relationship"{tuple_delimiter}윤남김{tuple_delimiter}웹 프레임워크 2{tuple_delimiter}윤남김은 웹 프레임워크 2 주간 A반 강사임{tuple_delimiter}9)
{record_delimiter}
("relationship"{tuple_delimiter}황기태{tuple_delimiter}운영체제{tuple_delimiter}황기태는 운영체제의 지도교수이자 혼합반 강사임{tuple_delimiter}9)
{record_delimiter}
("relationship"{tuple_delimiter}웹 프레임워크 2{tuple_delimiter}웹 공학 트랙{tuple_delimiter}웹 프레임워크 2 과정은 웹 공학 트랙 수강생만 신청 가능{tuple_delimiter}9)
{record_delimiter}
("relationship"{tuple_delimiter}운영체제{tuple_delimiter}모바일 트랙{tuple_delimiter}운영체제 과정은 모바일 트랙 수강생만 신청 가능{tuple_delimiter}9)
{record_delimiter}
("relationship"{tuple_delimiter}수강신청 변경 공지{tuple_delimiter}2월 28일{tuple_delimiter}수업 등록 변경은 2월 28일 금요일에 진행됨{tuple_delimiter}10)
{record_delimiter}
("relationship"{tuple_delimiter}수강신청 변경 공지{tuple_delimiter}웹 프레임워크 2{tuple_delimiter}수강신청 변경 공지는 웹 프레임워크 2 강의에 관한 내용임{tuple_delimiter}9)
{record_delimiter}
{completion_delimiter}

######################
Example 3:
Entity_types: PERSON,EVENT,COURSE,TECHNOLOGY
Text:

**아래는 컴퓨터 네트워크 3주차 파일의 1페이지 내용입니다.**

### 01 라우팅기능
#### 라우팅기능(1)
#####  라우팅시스템은 데이터를 최종 목적지까지 올바른 경로로 중개하는 교환기능을 제공

---
**아래는 컴퓨터 네트워크 3주차 파일의 2페이지 내용입니다.**

#### 라우팅기능(2)
#####  회선교환
######  통신하고자하는 호스트가 데이터를 전송하기 전에 연결경로를 미리 설정하는 방식

---
**아래는 컴퓨터 네트워크 3주차 파일의 3페이지 내용입니다.**
### 02 네트워크의분류
#### LAN
##### 단일 건물이나 학교 같은 가까운 거리에 위치하는 호스트로 구성된 네트워크
#### MAN
##### MAN은 LAN보다 큰 지역을 지원

######################
Output:
("entity"{tuple_delimiter}01 라우팅기능{tuple_delimiter}EVENT{tuple_delimiter}라우팅기능(1), 라우팅기능(2)의 내용을 포함한다. 컴퓨터 네트워크 3주차 파일의 1,2페이지에 위치함)
{record_delimiter}
("entity"{tuple_delimiter}라우팅기능(1){tuple_delimiter}EVENT{tuple_delimiter}라우팅시스템에 대한 설명을 포함한다. 01 라우팅기능에 속함. 컴퓨터 네트워크 3주차 파일의 1페이지에 위치함)
{record_delimiter}
("entity"{tuple_delimiter}라우팅기능(2){tuple_delimiter}EVENT{tuple_delimiter}회선교환, 메시지교환에 대한 설명을 포함한다. 01 라우팅기능에 속함. 컴퓨터 네트워크 3주차 파일의 2페이지에 위치함)
{record_delimiter}
("entity"{tuple_delimiter}라우팅시스템{tuple_delimiter}TECHNOLOGY{tuple_delimiter}데이터를 최종 목적지까지 올바른 경로로 중개하는 교환기능을 제공한다. 01 라우팅기능의 라우팅기능(1)에 속한다. 컴퓨터 네트워크 3주차 파일의 1페이지에 위치함)
{record_delimiter}
("entity"{tuple_delimiter}회선교환{tuple_delimiter}TECHNOLOGY{tuple_delimiter}통신하고자하는 호스트가 데이터를 전송하기 전에 연결경로를 미리 설정하는 방식이다. 01 라우팅기능의 라우팅기능(2)에 속한다. 컴퓨터 네트워크 3주차 파일의 2페이지에 위치함)
{record_delimiter}
("entity"{tuple_delimiter}02 네트워크의분류{tuple_delimiter}EVENT{tuple_delimiter}LAN, MAN, WAN의 내용을 포함하고 있다. 컴퓨터 네트워크 3주차 파일의 3페이지에 위치함)
{record_delimiter}
("entity"{tuple_delimiter}LAN{tuple_delimiter}TECHNOLOGY{tuple_delimiter}LAN은 단일 건물이나 학교 같은 가까운 거리에 위치하는 호스트로 구성된 네트워크이다. 02 네트워크의분류에 속함. 컴퓨터 네트워크 3주차 파일의 3페이지에 위치함)
{record_delimiter}
("entity"{tuple_delimiter}MAN{tuple_delimiter}TECHNOLOGY{tuple_delimiter}MAN은 LAN보다 큰 지역을 지원한다. 02 네트워크의분류에 속함. 컴퓨터 네트워크 3주차 파일의 3페이지에 위치함)
{record_delimiter}
("entity"{tuple_delimiter}컴퓨터 네트워크 3주차{tuple_delimiter}EVENT{tuple_delimiter}01 라우팅기능과 02 네트워크의분류 내용을 포함하는 강의 자료)
{record_delimiter}
("relationship"{tuple_delimiter}01 라우팅기능{tuple_delimiter}라우팅기능(1){tuple_delimiter}01 라우팅기능은 라우팅기능(1)을 하위 항목으로 포함한다{tuple_delimiter}10)
{record_delimiter}
("relationship"{tuple_delimiter}01 라우팅기능{tuple_delimiter}라우팅기능(2){tuple_delimiter}01 라우팅기능은 라우팅기능(2)를 하위 항목으로 포함한다{tuple_delimiter}10)
{record_delimiter}
("relationship"{tuple_delimiter}라우팅기능(1){tuple_delimiter}라우팅시스템{tuple_delimiter}라우팅기능(1)은 라우팅시스템에 대한 설명을 포함한다{tuple_delimiter}9)
{record_delimiter}
("relationship"{tuple_delimiter}라우팅기능(2){tuple_delimiter}회선교환{tuple_delimiter}라우팅기능(2)는 회선교환에 대한 설명을 포함한다{tuple_delimiter}9)
{record_delimiter}
("relationship"{tuple_delimiter}02 네트워크의분류{tuple_delimiter}LAN{tuple_delimiter}02 네트워크의분류는 LAN을 하위 항목으로 포함한다{tuple_delimiter}10)
{record_delimiter}
("relationship"{tuple_delimiter}02 네트워크의분류{tuple_delimiter}MAN{tuple_delimiter}02 네트워크의분류는 MAN을 하위 항목으로 포함한다{tuple_delimiter}10)
{record_delimiter}
("relationship"{tuple_delimiter}컴퓨터 네트워크 3주차{tuple_delimiter}01 라우팅기능{tuple_delimiter}컴퓨터 네트워크 3주차 강의는 01 라우팅기능 내용을 포함한다{tuple_delimiter}10)
{record_delimiter}
("relationship"{tuple_delimiter}컴퓨터 네트워크 3주차{tuple_delimiter}02 네트워크의분류{tuple_delimiter}컴퓨터 네트워크 3주차 강의는 02 네트워크의분류 내용을 포함한다{tuple_delimiter}10)
{record_delimiter}
{completion_delimiter}
######################
-Real Data-
######################
Entity_types: {entity_types}
Text: {input_text}
######################
Output: